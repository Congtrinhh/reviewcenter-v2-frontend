<div class="detail container">
  <button type="button" class="btn btn-success">
    <a href="admin/users/new" class="text-light">Add new item</a>
  </button>

  <h2>
    <span *ngIf="createMode; else updateText">Create</span
    ><ng-template #updateText>Update</ng-template>
  </h2>

  <form #detailForm="ngForm" (ngSubmit)="detailForm.form.valid && onSubmit()">
    <div class="form-control">
      <label for="">Name</label>
      <input
        type="text"
        #name="ngModel"
        [(ngModel)]="item.displayName"
        name="name"
        required
      />
      <div *ngIf="detailForm.submitted && name.invalid" class="error">
        Name is invalid
      </div>
    </div>

    <div class="form-control">
      <label for="">Email</label>
      <input
        type="text"
        #email="ngModel"
        name="email"
        [(ngModel)]="item.email"
        email
        required
      />
      <div *ngIf="detailForm.submitted && email.invalid" class="error">
        Email is invalid
      </div>
    </div>

    <div class="form-control my-5">
      <label for="">Password</label>
      <div *ngIf="createMode; else passwordInputForUpdating">
        <input
          type="text"
          #password="ngModel"
          name="password"
          [(ngModel)]="item.password"
          required
          minlength="6"
        />
      </div>
      <ng-template #passwordInputForUpdating>
        <input
          type="text"
          #password="ngModel"
          name="password"
          [(ngModel)]="item.password"
        />
        <span
          >If you want to update password, enter new password. If you don't
          want, leave it blank</span
        >
        <div *ngIf="detailForm.submitted && password?.invalid" class="error">
          Password is invalid
        </div>
      </ng-template>
    </div>

    <div class="form-control">
      <label for="">Avatar url</label>
      <input
        type="text"
        #avatarUrl="ngModel"
        [(ngModel)]="item.avatarUrl"
        name="avatar-url"
        appUrlValidator
      />
      <div
        *ngIf="detailForm.submitted && avatarUrl.errors?.urlInvalid"
        class="error"
      >
        Avatar url is invalid
      </div>
    </div>

    <div class="form-control my-5">
      <div *ngFor="let role of roles">
        <input
          type="checkbox"
          name="role-ids"
          [value]="role.id"
          (change)="handleRoleChange($event)"
        />
        {{ role.name }}
      </div>
    </div>

    <div class="form-control">
      <label for="">Enabled</label>
      <input type="checkbox" [(ngModel)]="item.enabled" name="enabled" />
    </div>

    <div class="form-control">
      <label for="">Provider</label>
      <input readonly type="text" [ngModel]="item.provider" name="provider" />
    </div>

    <div class="form-control">
      <label for="">created date</label>
      <input
        readonly
        type="text"
        [ngModel]="item.createdDate"
        name="created-date"
      />
    </div>
    <div class="form-control">
      <label for="">modified date</label>
      <input
        readonly
        type="text"
        [ngModel]="item.modifiedDate"
        name="modified-date"
      />
    </div>

    <button>Submit</button>
  </form>

  <div class="container my-5">
    <button type="button" class="btn btn-success mr-5">
      <a href="admin/users/" class="text-light">To list page</a>
    </button>
    <button type="button" class="btn btn-dark" (click)="back()">Back</button>
  </div>
</div>
